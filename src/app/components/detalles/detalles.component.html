@if (mostrar && evento) {
<div
  class="fixed inset-0 flex items-center justify-center z-50 p-4 backdrop-blur-sm bg-white/30"
  (click)="cerrarModal()"
>
  <div
    class="bg-white rounded-lg shadow-xl p-4 md:p-6 w-full max-w-2xl relative z-10 border border-gray-200 max-h-[90vh] overflow-y-auto"
    (click)="prevenirCierre($event)"
    style="background-color: white"
  >
    <div class="flex justify-between items-center mb-4 md:mb-6">
      <h2 class="text-xl md:text-2xl font-bold text-gray-800">
        Detalles del Evento
      </h2>
      <button
        (click)="cerrarModal()"
        class="text-gray-500 hover:text-gray-700 text-2xl md:text-3xl font-bold leading-none"
      >
        ×
      </button>
    </div>

    <div class="mb-3 md:mb-4">
      <h3 class="text-base md:text-lg font-semibold text-gray-700 mb-1 md:mb-2">
        Fecha:
      </h3>
      <p class="text-gray-800 text-sm md:text-base">
        {{ formatearFecha(evento.fechaEvento) }}
      </p>
    </div>

    <div class="mb-3 md:mb-4">
      <h3 class="text-base md:text-lg font-semibold text-gray-700 mb-1 md:mb-2">
        ID Evento:
      </h3>
      <p class="text-gray-800 text-sm md:text-base">
        {{ evento.idEvento }}
      </p>
    </div>

    <div class="mb-3 md:mb-4">
      <h3 class="text-base md:text-lg font-semibold text-gray-700 mb-1 md:mb-2">
        Profesor:
      </h3>
      @if (evento.idProfesor < 0) {
      <p class="text-gray-600 text-xs md:text-sm py-3 md:py-4">
        No hay profesor asignado
      </p>
      } @else if (cargandoProfesor) {
      <div class="flex items-center py-3 md:py-4">
        <div class="loader-small mr-2"></div>
        <span class="text-gray-600 text-xs md:text-sm"
          >Cargando profesor...</span
        >
      </div>
      } @else if (profesorActual) {
      <p class="text-gray-800 text-sm md:text-base">
        {{ profesorActual.nombre }}
      </p>
      } @else {
      <p class="text-gray-600 text-xs md:text-sm py-3 md:py-4">
        El usuario asignado no es un profesor
      </p>
      }
    </div>

    <div class="mb-4 md:mb-6">
      <h3 class="text-base md:text-lg font-semibold text-gray-700 mb-2">
        Actividades:
      </h3>
      @if (cargandoActividades) {
      <div class="flex items-center py-3 md:py-4">
        <div class="loader-small mr-2"></div>
        <span class="text-gray-600 text-xs md:text-sm"
          >Cargando actividades...</span
        >
      </div>
      } @else if (actividadesEvento && actividadesEvento.length > 0) {
      <div class="space-y-3">
        @for (actividad of actividadesEvento; track actividad.idActividad) {
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-3">
          <div class="flex items-center justify-between mb-2">
            <span
              class="bg-blue-200 text-blue-800 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-semibold"
            >
              {{ actividad.nombreActividad }}
            </span>
          </div>
          @if (capitanesActividades.has(actividad.idEventoActividad)) {
          <div class="mt-2 text-xs md:text-sm text-gray-700">
            <span class="font-semibold">Capitán:</span>
            <span class="ml-1">{{ getCapitanNombre(actividad.idEventoActividad) }}</span>
          </div>
          } @else {
          <div class="mt-2 text-xs md:text-sm text-gray-500 italic">
            Sin capitán asignado
          </div>
          }
        </div>
        }
      </div>
      } @else {
      <p class="text-gray-600 text-xs md:text-sm py-3 md:py-4">
        No hay actividades programadas para este evento
      </p>
      } @if (!mostrarFormulario && comprobarFechaProximaEvento(evento)) {
      <app-inscripcion [idEvento]="evento.idEvento"></app-inscripcion>
      }
    </div>

    <div class="flex flex-col md:flex-row gap-3">
      <button
        (click)="cerrarModal()"
        class="flex-1 bg-gray-300 text-black px-4 py-2 rounded hover:bg-gray-400 font-semibold text-sm md:text-base"
      >
        Cerrar
      </button>
      @if (comprobarFechaProximaEvento(evento)) { @if (mostrarFormulario) {
      <button
        (click)="mostrarForm()"
        class="flex-1 bg-blue-400 text-black px-4 py-2 rounded hover:bg-blue-500 font-semibold text-sm md:text-base"
      >
        Inscribirse
      </button>
      } @else {
      <button
        (click)="submitInscripcion()"
        class="flex-1 bg-green-400 text-black px-4 py-2 rounded hover:bg-green-500 font-semibold text-sm md:text-base"
      >
        Confirmar
      </button>
      } }
    </div>
  </div>
</div>
}
