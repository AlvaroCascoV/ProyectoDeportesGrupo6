<div class="home-container p-4 md:p-8 max-w-7xl mx-auto">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8">
    <!-- Bloque Izquierdo - Inscribirse -->
    @if (eventosProximos.length > 0 ) {
    <div class="bg-white p-4 md:p-6 rounded-lg shadow-md">
      <h2 class="text-xl md:text-2xl font-bold mb-3 md:mb-4 text-gray-800">
        Inscribete al siguiente evento
      </h2>
      <div class="border-l-4 border-blue-400 pl-3 md:pl-4 py-2 mb-4 md:mb-6">
        <p class="font-semibold text-gray-800 text-sm md:text-base">
          {{ eventosProximos[0].fechaEvento }} - Evento {{ eventosProximos[0].idEvento }}
        </p>

        <div class="flex flex-wrap gap-2 mt-2">
          @for (actividad of eventosProximos[0].listaActividades; track
          actividad.idActividad) {
          <span
            class="bg-blue-200 text-blue-800 px-2 md:px-3 py-1 rounded-full text-xs font-semibold"
          >
            {{ actividad.nombreActividad }}
          </span>
          }
        </div>
      </div>
      <button
        class="w-full md:w-auto bg-blue-400 text-black px-4 md:px-6 py-2 rounded hover:bg-blue-500 cursor-pointer font-semibold"
      >
        Inscribir
      </button>
    </div>
    }

    <!-- Bloque Derecho - Proximos Eventos -->
    <div class="bg-white p-4 md:p-6 rounded-lg shadow-md">
      <h2 class="text-xl md:text-2xl font-bold mb-4 md:mb-6 text-gray-800">Proximos Eventos</h2>
      <div class="space-y-3 md:space-y-4">
        @if (eventosProximos.length>0){
          @for (evento of eventosProximos.slice(0,3); track evento.idEvento) {
            <div class="border-l-4 border-blue-400 pl-3 md:pl-4 py-2 cursor-pointer hover:bg-gray-50 transition-colors rounded-r" (click)="abrirModalEvento(evento)">
              <p class="font-semibold text-gray-800 text-sm md:text-base">{{ evento.fechaEvento }} - Evento {{ evento.idEvento }}</p>                
            </div>
          }
        } @else {
          <div class="flex items-center justify-center py-6 md:py-8">
            <div class="loader mr-3"></div>
            <span class="text-gray-600 font-semibold text-sm md:text-base">Buscando eventos...</span>
          </div>
        }
      </div>
    </div>
    <div class="contenedor-principal col-span-1 md:col-span-2">
      <h1 class="text-xl md:text-2xl font-bold mb-3 md:mb-4 text-gray-800">Calendario de eventos</h1>
      @if (eventosProximos.length > 0){
        <app-calendario
          [eventosRecibidos]="eventosCalendario">
        </app-calendario>
      } @else {
        <div class="flex items-center justify-center py-6 md:py-8">
          <div class="loader mr-3"></div>
          <span class="text-gray-600 font-semibold text-sm md:text-base">Buscando eventos...</span>            
        </div>
      }
    </div>
  </div>
</div>

<!-- Modal para mostrar detalles del evento -->
@if (mostrarModal && eventoSeleccionado) {
<div
  class="fixed bg-black bg-opacity-50 inset-0 flex items-center justify-center z-50 p-4"
  (click)="cerrarModal()"
>
  <div
    class="bg-white rounded-lg shadow-xl p-4 md:p-6 w-full max-w-2xl relative z-10 border border-gray-200 max-h-[90vh] overflow-y-auto"
    (click)="$event.stopPropagation()"
    style="background-color: white"
  >
    <div class="flex justify-between items-center mb-4 md:mb-6">
      <h2 class="text-xl md:text-2xl font-bold text-gray-800">Detalles del Evento</h2>
      <button
        (click)="cerrarModal()"
        class="text-gray-500 hover:text-gray-700 text-2xl md:text-3xl font-bold leading-none"
      >
        Ã—
      </button>
    </div>

    <div class="mb-3 md:mb-4">
      <h3 class="text-base md:text-lg font-semibold text-gray-700 mb-1 md:mb-2">Fecha:</h3>
      <p class="text-gray-800 text-sm md:text-base">{{ eventoSeleccionado.fechaEvento }}</p>
    </div>

    <div class="mb-3 md:mb-4">
      <h3 class="text-base md:text-lg font-semibold text-gray-700 mb-1 md:mb-2">ID Evento:</h3>
      <p class="text-gray-800 text-sm md:text-base">{{ eventoSeleccionado.idEvento }}</p>
    </div>

    <div class="mb-3 md:mb-4">
      <h3 class="text-base md:text-lg font-semibold text-gray-700 mb-1 md:mb-2">Profesor:</h3>
      <p class="text-gray-800 text-sm md:text-base">{{ eventoSeleccionado.idProfesor }}</p>
    </div>

    <div class="mb-4 md:mb-6">
      <h3 class="text-base md:text-lg font-semibold text-gray-700 mb-2">Actividades:</h3>
      @if (actividadesEvento && actividadesEvento.length > 0) {
      <div class="flex flex-wrap gap-2">
        @for (actividad of actividadesEvento; track actividad.idActividad) {
        <span
          class="bg-blue-200 text-blue-800 px-2 md:px-3 py-1 rounded-full text-xs md:text-sm font-semibold"
        >
          {{ actividad.nombreActividad }}
        </span>
        }
      </div>
      } @else {
      <div class="flex items-center py-3 md:py-4">
        <div class="loader-small mr-2"></div>
        <span class="text-gray-600 text-xs md:text-sm">Cargando actividades...</span>
      </div>
      }
    </div>

    <div class="flex flex-col md:flex-row gap-3">
      <button
        (click)="cerrarModal()"
        class="flex-1 bg-gray-300 text-black px-4 py-2 rounded hover:bg-gray-400 font-semibold text-sm md:text-base"
      >
        Cerrar
      </button>
      <button
        class="flex-1 bg-blue-400 text-black px-4 py-2 rounded hover:bg-blue-500 font-semibold text-sm md:text-base"
      >
        Inscribirse
      </button>
    </div>
  </div>
</div>
}
