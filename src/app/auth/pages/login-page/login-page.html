<form class="space-y-4" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
  <div>
    <label class="block text-sm font-semibold text-gray-700 mb-1"
      >Usuario</label
    >
    <div class="flex">
      <div class="relative flex-1">
        <i
          class="fa-solid fa-user absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"
        ></i>
        <input
          type="text"
          placeholder="Tu usuario"
          formControlName="username"
          class="w-full pl-10 pr-3 py-2 border border-gray-200 rounded-l border-r-0 focus:outline-none focus:ring-2 focus:ring-blue-200"
          autocomplete="username"
        />
      </div>
      <span
        class="inline-flex items-center px-3 py-2 border border-gray-200 rounded-r bg-gray-50 text-gray-600 text-sm select-none"
      >
        &#64;tajamar365.com
      </span>
    </div>
    @if (loginForm.get('username')?.touched &&
    loginForm.get('username')?.invalid) {
    <p class="text-xs text-red-600 mt-1">El usuario es obligatorio</p>
    }
  </div>

  <div>
    <label class="block text-sm font-semibold text-gray-700 mb-1"
      >Contraseña</label
    >
    <div class="relative">
      <i
        class="fa-solid fa-lock absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"
      ></i>
      <input
        [type]="passwordVisible() ? 'text' : 'password'"
        placeholder="Tu contraseña"
        formControlName="password"
        class="w-full pl-10 pr-10 py-2 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-200"
        autocomplete="current-password"
      />
      <button
        type="button"
        (click)="togglePasswordVisibility()"
        class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 cursor-pointer p-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-200"
        [attr.aria-label]="passwordVisible() ? 'Ocultar contraseña' : 'Mostrar contraseña'"
      >
        @if (passwordVisible()) {
          <i class="fa-solid fa-eye-slash"></i>
        } @else {
          <i class="fa-solid fa-eye"></i>
        }
      </button>
    </div>
    @if (loginForm.get('password')?.touched &&
    loginForm.get('password')?.invalid) {
    <p class="text-xs text-red-600 mt-1">La contraseña es obligatoria</p>
    }
  </div>

  <button
    type="submit"
    [disabled]="isPosting()"
    class="w-full bg-blue-400 text-black px-4 py-2 rounded hover:bg-blue-500 cursor-pointer font-semibold disabled:opacity-60 disabled:cursor-not-allowed transition-colors"
  >
    @if (isPosting()) { Entrando... } @else { Login }
  </button>

  @if (hasError()) {
  <div
    class="bg-red-100 border border-red-200 text-red-800 px-4 py-3 rounded text-sm"
  >
    Por favor, verifica usuario y contraseña.
  </div>
  }
</form>
